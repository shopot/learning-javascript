# Список ответов по теме "Модули в Web"

1. Модули ES6 — это стандартная система модулей в JavaScript, которая позволяет разделять код на отдельные файлы с возможностью импорта и экспорта функциональности. От обычных скриптов они отличаются строгим режимом по умолчанию, отсутствием глобальных переменных на верхнем уровне и статической структурой.

2. Тег `<script type="module">` используется для указания браузеру, что скрипт является модулем. Это позволяет использовать импорты и экспорты напрямую в браузере без сборки.

3. Три особенности модулей ES6: автоматический строгий режим, отсутствие глобального объекта this на верхнем уровне и изоляция верхнеуровневых объявлений от глобальной области видимости.

4. Инструменты сборки like webpack все еще используются, потому что они объединяют модули в один файл, что улучшает производительность за счет уменьшения количества HTTP-запросов и позволяет использовать дополнительные оптимизации.

5. Браузер загружает модули рекурсивно: сначала основной модуль, затем все его импорты, затем импорты этих импортов, пока не будет загружена вся зависимая графа.

6. Использование export во inline-модулях бессмысленно, потому что HTML не предоставляет способа задать имя для такого модуля, и поэтому другие модули не могут импортировать из него значения.

7. Атрибут defer означает, что модуль загружается параллельно с HTML, но выполняется только после полной загрузки и парсинга HTML, в порядке их объявления в документе.

8. Async-модули выполняются сразу после загрузки, даже если HTML еще не полностью загружен, что может нарушить порядок выполнения скриптов.

9. Совместимость обеспечивается с помощью тега `<script nomodule>`, который игнорируется современными браузерами, но выполняется старыми, и в него можно поместить транспилированную версию кода для старых браузеров.

10. Для кросс-доменной загрузки модулей требуются CORS-заголовки, разрешающие такой запрос. Модули не могут быть загружены с другого домена без proper CORS.

11. Тестирование с file:// URL сложно, потому что браузеры блокируют кросс-доменные запросы для модулей, а file:// считается другим origin, поэтому нужен локальный сервер.

12. Расширение .mjs используется как подсказка для Node.js, чтобы отличить модули ES6 от CommonJS модулей. Для браузеров расширение не имеет значения, но важен MIME-тип.

13. Динамический импорт — это загрузка модуля во время выполнения кода с помощью import(), в отличие от статического импорта, который происходит во время компиляции.

14. import() возвращает Promise, который резолвится в объект с экспортами модуля. С ним можно работать через .then() или async/await.

15. import() — это оператор, а не функция, потому что ему нужен доступ к контексту текущего модуля для разрешения относительных путей, что невозможно для обычной функции.

16. В инструментах сборки динамический импорт позволяет разделять код на чанки (chunks), которые загружаются по требованию, уменьшая начальный размер бандла.

17. import.meta — это объект с метаданными о текущем модуле. import.meta.url содержит URL-адрес, по которому модуль был загружен.

18. URL относительно текущего модуля создается с помощью конструктора new URL(relativePath, import.meta.url), который разрешает относительный путь относительно URL модуля.

19. import.meta работает только в модулях ES6 в браузерах и Node.js, но не в обычных скриптах или CommonJS модулях в Node.

20. Файл модуля JavaScript должен иметь MIME-тип application/javascript или text/javascript, как и обычные JS-файлы. Для .mjs файлов может потребоваться настройка сервера.

