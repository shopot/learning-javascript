# Цикл `for...of`

Цикл `for...of` предназначен для удобного перебора элементов массивов и других итерируемых объектов.

## Что такое цикл `for...of`?

Цикл `for...of` появился в ES6 (ECMAScript 2015) и предназначен для перебора элементов массивов, строк и других итерируемых объектов (например, `Map`, `Set`).

### Основные особенности

- **Простота синтаксиса** — код становится чище и читаеме.
- **Автоматический перебор** — не нужно управлять индексами вручную.
- **Не изменяет исходный массив** — в отличие от `for` или `for...in`, он не позволяет случайно изменить массив.

## Синтаксис `for...of`

Базовый синтаксис выглядит так:

```javascript
for (let переменная of массив) {
  // код, выполняемый для каждого элемента
}
```

**Разбор синтаксиса:**
- `переменная` — временное имя, которое принимает значение текущего элемента на каждой итерации.
- `массив` — перебираемая коллекция (массив, строка и др.).

## Примеры использования

### Перебор массива

Выведем все элементы массива:

```javascript
const names = ["Chantal", "John", "Maxime", "Bobbi", "Jair"];

for (let name of names) {
  console.log(name);
}
```

Вывод:
```
Chantal  
John  
Maxime  
Bobbi  
Jair  
```

### Перебор строки

`for...of` можно использовать и для строк:

```javascript
const text = "Hello";

for (let char of text) {
  console.log(char);
}
```

Вывод:
```
H  
e  
l  
l  
o  
```

### Использование с `const`

Если переменная внутри цикла не изменяется, лучше использовать `const`:

```javascript
const numbers = [10, 20, 30];

for (const num of numbers) {
  console.log(num * 2); // 20, 40, 60
}
```

## Отличия от других циклов

| Цикл          | `for` | `for...in` | `for...of` |
|--------------|-------|------------|------------|
| Перебирает    | Индексы | Ключи (индексы) | Значения |
| Подходит для массивов | Да | Да (но не рекомендуется) | Да |
| Подходит для объектов | Нет | Да | Нет |
| Можно изменять массив | Да | Да | Нет (только чтение) |

### Почему `for...of` лучше `for...in` для массивов?

Цикл `for...in` перебирает **индексы** (или ключи), а не значения, и может захватывать лишние свойства, если массив был модифицирован.

**Пример проблемы с `for...in`:**
```javascript
const arr = [1, 2, 3];
arr.customProp = "Ой!";

for (let key in arr) {
  console.log(key); // Выведет: 0, 1, 2, "customProp"
}
```

**`for...of` избегает этой проблемы:**
```javascript
for (let value of arr) {
  console.log(value); // Выведет только 1, 2, 3
}
```

## Ограничения `for...of`

- **Не работает с объектами** (только с итерируемыми структурами).
- **Нельзя изменить исходный массив** (только читать значения).
- **Нет доступа к индексу** (если нужен индекс, лучше использовать `forEach` или обычный `for`).

### Как получить индекс в `for...of`?

Можно использовать `entries()`:

```javascript
const fruits = ["Яблоко", "Банан", "Апельсин"];

for (const [index, fruit] of fruits.entries()) {
  console.log(`Индекс: ${index}, Фрукт: ${fruit}`);
}
```

Вывод:
```
Индекс: 0, Фрукт: Яблоко  
Индекс: 1, Фрукт: Банан  
Индекс: 2, Фрукт: Апельсин  
```

## Когда использовать `for...of`?

- Когда нужно просто **перебрать значения массива** без изменения.
- Для работы со **строками посимвольно**.
- Для перебора **коллекций** (`Set`, `Map`).

### Альтернативы

- `forEach()` — если нужно выполнить функцию для каждого элемента.
- Обычный `for` — если нужен контроль индексов или изменение массива.

## Что запомнить

1. `for...of` перебирает **значения**, а не индексы.
2. Он не изменяет исходный массив.
3. Не подходит для обычных объектов.
